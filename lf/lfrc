# Options
set shell sh
set shellopts '-eu'
set ifs "\n"
set scrolloff 10
set cursorpreviewfmt "\033[7;2m"
set ignorecase true
set icons true

# Key Bindings
map <enter> shell
map . set hidden!
map x cut
map y copy
map p paste
map r reload
map d trash
map c clear
map E extract
map <c-n> push :touch<space>
map <c-N> push :mkdir<space>
map <c-f> $lf -remote "send $id select \"$(fzf)\""
map <c-r> push :rename<space>
map gg top
map gh cd ~/
map gD cd ~/Documents
map gd cd ~/Downloads
map gp cd ~/Pictures
map gc cd ~/.config
map gs cd /usr/local/bin/Scripts
map gt cd ~/.local/share/Trash/files

# Opening Files
cmd open &{{
    case $(file --mime-type -Lb $f) in
        text/*) lf -remote "send $id \$$EDITOR \$fx";;
        *) for f in $fx; do $OPENER $f > /dev/null 2> /dev/null & done;;
    esac
}}

# File Operations
cmd touch $touch "$(echo $* | tr ' ' '\ ')"
cmd mkdir $mkdir -p "$(echo $* | tr ' ' '\ ')"
cmd rename %[ -e $1 ] && printf "file exists" || mv $f $1

# Trashing Files
cmd trash ${{ 
    if [[ -n "$fs" ]]; then
        for file in $fs; do
            sudo mv "$file" ~/.Trash
        done
    else
        sudo mv "$f" ~/.Trash
    fi
}}

# Archive Extraction
cmd extract ${{
    set -f
    case $f in
        *.tar.bz|*.tar.bz2|*.tbz|*.tbz2) tar xjvf $f;;
        *.tar.gz|*.tgz) tar xzvf $f;;
        *.tar.xz|*.txz) tar xJvf $f;;
        *.zip) unzip $f;;
        *.rar) unrar x $f;;
        *.7z) 7z x $f;;
    esac
}}
